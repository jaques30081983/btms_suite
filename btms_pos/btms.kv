#:kivy 1.4
#28f788764eef458d83c7186b8776d328
<BtmsRoot>:
	orientation: 'vertical'
	canvas.before:
        Color:
            rgb: .6, .6, .6
        Rectangle:
            size: self.size
            source: 'images/background.png'
	
						
		
		
		
	ScreenManager:
		id: sm
		
		Screen:
			name: 'server_connect'
			
#			AnchorLayout:
#				anchor_x: "left"
#				anchor_y: "top"
#				padding: 0
#				Label:
#					size_hint: 0.05, 0.07
#					
#					
#					canvas.before:
#						Color:
#							rgb: .6, .6, .6
#						Rectangle:
#							size: self.size
#							pos: self.pos
#							source: 'images/btms_logo_01.png'
			
			
			AnchorLayout:
				anchor_x: "center"
				anchor_y: "center"
			
                BoxLayout:
                    id: kv_login_list

                    size_hint_x: 0.3
                    size_hint_y: .8
                    orientation: 'vertical'
                    spacing: 10

                    TextInput:
                        id: kv_server_adress
                        text: "192.168.178.12:8080"
                        hint_text: "Server Adress: z.B. 192.168.178.1"
                        multiline: False
                        font_size: "30dp"
                        on_text_validate: root.start_wamp_component(kv_server_adress.text)

                    #TextInput:
                        #id: kv_user_log
                        #size_hint_y: .5
                        #size_hint_x: 1
                        #hint_text: "log..."
                        #multiline: False
                        #font_size: "12dp"

                    BoxLayout:
                        id: kv_user_select

                        TextInput:
                            id: kv_user_input
                            size_hint_y: 1
                            size_hint_x: .7
                            text: ""
                            hint_text: "Username"
                            multiline: False
                            font_size: "30dp"

                            on_text_validate: root.start_wamp_component_auth(kv_server_adress.text, kv_user_input.text, kv_password_input.text)
                        Button:
                            id: kv_user_change
                            text: 'change'
                            size_hint_y: 1
                            size_hint_x: .3
                            font_size: "15dp"
                            on_release: sm.current = 'login_user'

                    TextInput:
                        id: kv_password_input
                        size_hint_y: 1
                        text:
                        password: True
                        multiline: False
                        font_size: "50dp"

                        on_text_validate: root.start_wamp_component_auth(kv_server_adress.text, kv_user_input.text, kv_password_input.text)


                    GridLayout:
                        cols: 3
                        size_hint_y: 3

                        Button:
                            text: "7"
                            font_size: "30dp"
                            pos_hint: {'x': .7, 'y': .53}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "7";

                        Button:
                            text: "8"
                            font_size: "30dp"
                            pos_hint: {'x': .8, 'y': .53}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "8";

                        Button:
                            text: "9"
                            font_size: "30dp"
                            pos_hint: {'x': .9, 'y': .53}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "9";

                        Button:
                            text: "4"
                            font_size: "30dp"
                            pos_hint: {'x': .7, 'y': .43}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "4";

                        Button:
                            text: "5"
                            font_size: "30dp"
                            pos_hint: {'x': .8, 'y': .43}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "5";

                        Button:
                            text: "6"
                            font_size: "30dp"
                            pos_hint: {'x': .9, 'y': .43}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "6";


                        Button:
                            text: "1"
                            font_size: "30dp"
                            pos_hint: {'x': .7, 'y': .33}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "1";

                        Button:
                            text: "2"
                            font_size: "30dp"
                            pos_hint: {'x': .8, 'y': .33}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "2";

                        Button:
                            text: "3"
                            font_size: "30dp"
                            pos_hint: {'x': .9, 'y': .33}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "3";


                        Button:
                            text: "0"
                            font_size: "30dp"
                            pos_hint: {'x': .7, 'y': .23}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += "0";

                        Button:
                            text: "."
                            font_size: "30dp"
                            pos_hint: {'x': .8, 'y': .23}
                            size_hint: .1, .1
                            on_release: kv_password_input.text += ".";

                        Button:
                            text: "CL"
                            font_size: "30dp"
                            pos_hint: {'x': .9, 'y': .23}
                            size_hint: .1, .1
                            on_release: kv_password_input.text = "";







                    Button:
                        id: kv_login_button
                        size_hint_y: 1
                        text: 'login'
                        on_release: root.start_wamp_component_auth(kv_server_adress.text, kv_user_input.text, kv_password_input.text)
	
		Screen:
			name: 'login_user'
			
#			AnchorLayout:
#				anchor_x: "left"
#				anchor_y: "top"
#				padding: 0
#				Label:
#					size_hint: 0.05, 0.07
#					
#					
#					canvas.before:
#						Color:
#							rgb: .6, .6, .6
#						Rectangle:
#							size: self.size
#							pos: self.pos
#							source: 'images/btms_logo_01.png'
			
			
			
			
					
			GridLayout:
				id: kv_user_list
				pos_hint: {'x': .1, 'y': .5}
				size_hint_x: .8
				size_hint_y: None
				cols: 4
				
				spacing: 5
						
				
							
							
		Screen:
			name: 'login_auth'
			
#			AnchorLayout:
#				anchor_x: "left"
#				anchor_y: "top"
#				padding: 0
#				Label:
#					size_hint: 0.05, 0.07
#					
#					
#					canvas.before:
#						Color:
#							rgb: .6, .6, .6
#						Rectangle:
#							size: self.size
#							pos: self.pos
#							source: 'images/btms_logo_01.png'
			
			AnchorLayout:
				anchor_x: "center"
				anchor_y: "center"
				
					

						
						
		Screen:
			name: 'work1'
			event_title: event_title.__self__
			event_title_cf: event_title_cf.__self__
			event_date: event_date.__self__
			
			ScreenManager:     
				pos_hint: {'x': .0, 'y': .0}
				size_hint: .34, 1
				id: item_screen_manager
						
				Screen:
					name: 'first_item_screen'
					
					
					#ScrollView:
						#size_hint: 1, .94
						#pos_hint: {'x': 0, 'y': .06}
						#scroll_timeout: 100
						#scroll_distance: 20
					
				   
                    GridLayout:
                        id: sale_item_list_box
                        pos_hint: {'x': .0, 'y': .06}
                        size_hint: 1, .94
                        padding: 0
                        spacing: 5
                        height: 30
                        cols: 4
                        rows: None
                        do_scroll_x: False
                        row_default_height: (self.width / 3.3)
							
							
				Screen:
					name: 'second_item_screen'
					
					
					#ScrollView:
						#size_hint: 1, .94
						#pos_hint: {'x': 0, 'y': .06}
						#scroll_timeout: 100
						#scroll_distance: 20
					
				   
                    BoxLayout:
                        id: sale_item_list_box2
                        pos_hint: {'x': .0, 'y': .06}
                        size_hint: 1, .94
                        orientation: 'vertical'
                        spacing: 5


                        Button:
                            text: "Back"
                            size_hint: 1, 0.05
                            on_release: item_screen_manager.current = "first_item_screen"
								
							
			#ScrollView:
				#size_hint: .34, .825
				#pos_hint: {'x': .35, 'y': .173}
				#scroll_timeout: 100
				#scroll_distance: 20

				
					
					
            GridLayout:
                id: bill_item_list_box
                #pos_hint: {'x': .0, 'y': .2}
                pos_hint: {'x': .35, 'y': .173}
                size_hint: .34, .825
                padding: 0
                spacing: 5
                height: 50
                cols: 1
                rows: None
                do_scroll_x: False
                row_default_height: 100
					
					
					

			Button:
				id: event_btn
				pos_hint: {'x': .7, 'y': .94}
				size_hint: .3, .06
				text: 'select...'
				on_release: event_title.open(self)
				size_hint_y: None
				height: event_time.height
				background_normal: 'atlas://data/images/defaulttheme/spinner'
				background_down: 'atlas://data/images/defaulttheme/spinner_pressed'
				background_disabled_normal: 'atlas://data/images/defaulttheme/spinner_disabled'
			
			DropDown:
				id: event_title
				#pos_hint: {'x': .7, 'y': .94}
				#size_hint: None, None
				font_size: self.height * .35
				on_select: event_btn.text = '{}'.format(args[1])
				#on_select: event_date = '{}'.format(args[1])
                on_parent: self.dismiss()


			Button:
				id: event_date_btn
				pos_hint: {'x': .7, 'y': .87}
				font_size: self.height * .8
				size_hint: .3, None
				text: 'select...'
				on_release: event_date.open(self)
				size_hint_y: None
				height: event_time.height
				background_normal: 'atlas://data/images/defaulttheme/spinner'
				background_down: 'atlas://data/images/defaulttheme/spinner_pressed'
				background_disabled_normal: 'atlas://data/images/defaulttheme/spinner_disabled'

			
			DropDown:
				id: event_date
				font_size: self.height * .35
				on_parent: self.dismiss()
				on_select: event_date_btn.text = '{}'.format(args[1])
				#on_select: root.set_event_day_times('{}'.format(args[1]))
			
						
			
			#Spinner:
				#id: event_date
				#text: "loading..."
				#font_size: self.height * .7
				#pos_hint: {'x': .7, 'y': .87}
				#size_hint: .3, .06
				#on_text: number_display_box.text = self.text; 

				
			
				
				
			
				
			Spinner:
				id: event_time
				text: 'loading...'
				pos_hint: {'x': .7, 'y': .80}
				size_hint: .3, .06
				font_size: self.height * 0.8
				#on_text: number_display_box.text = self.text;
				on_text: root.set_event_time(self.text)
			
				
				
			Label:
				id: number_display_box
				text: ""
				text_size: self.height * 3.1 + (self.width * 0.2), None
				font_size: self.height * 0.7
				halign: "right"
				multiline: False
				pos_hint: {'x': .7, 'y': .70}
				size_hint: .3, .1
				
			Label:
				id: res_number_display_box
				text: ""
				text_size: self.height * 3.1 + (self.width * 0.2), None
				font_size: self.height * 0.7
				halign: "right"
				multiline: False
				pos_hint: {'x': .7, 'y': .70}
				size_hint: .3, .1
					
				
			Button:
				id: kv_res_button
				text: "Reserve"
				font_size: self.height * 0.6
				pos_hint: {'x': .7, 'y': .64}
				size_hint: .15, .05
				on_release: root.reserve()
			Button:
				id: kv_ret_button
				text: "Retrieve"
				font_size: self.height * 0.6
				pos_hint: {'x': .85, 'y': .64}
				size_hint: .15, .05
				on_release: root.retrieve(0)

			 
				
			Button:
				text: "7"
				font_size: "30dp"
				pos_hint: {'x': .7, 'y': .53}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "7";
						
			Button:
				text: "8"
				font_size: "30dp"
				pos_hint: {'x': .8, 'y': .53}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "8";
				
			Button:
				text: "9"
				font_size: "30dp"
				pos_hint: {'x': .9, 'y': .53}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "9";    

			Button:
				text: "4"
				font_size: "30dp"
				pos_hint: {'x': .7, 'y': .43}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "4";
						
			Button:
				text: "5"
				font_size: "30dp"
				pos_hint: {'x': .8, 'y': .43}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "5";
				
			Button:
				text: "6"
				font_size: "30dp"
				pos_hint: {'x': .9, 'y': .43}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "6"; 
				
				
			Button:
				text: "1"
				font_size: "30dp"
				pos_hint: {'x': .7, 'y': .33}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "1";
						
			Button:
				text: "2"
				font_size: "30dp"
				pos_hint: {'x': .8, 'y': .33}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "2";
				
			Button:
				text: "3"
				font_size: "30dp"
				pos_hint: {'x': .9, 'y': .33}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "3"; 
				
				
			Button:
				text: "0"
				font_size: "30dp"
				pos_hint: {'x': .7, 'y': .23}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += "0";
						
			Button:
				text: "."
				font_size: "30dp"
				pos_hint: {'x': .8, 'y': .23}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text += ".";
				
			Button:
				text: "CL"
				font_size: "30dp"
				pos_hint: {'x': .9, 'y': .23}
				size_hint: .1, .1
				on_press: res_number_display_box.text = "";
				on_release: number_display_box.text = "";
				on_press: root.create_clock()
                on_release: root.delete_clock()
				
				

			Button:
				id: kv_cash_button
				text: "CASH"
				font_size: self.height * 0.5
				pos_hint: {'x': .7, 'y': .12}
				size_hint: .15, .10
				on_release: root.cash()
				
			Button:
				id: kv_card_button
				text: "CARD"
				font_size: self.height * 0.5
				pos_hint: {'x': .85, 'y': .12}
				size_hint: .15, .10
				on_release: root.card()

								

			Button:
			    id: kv_journal_button
				text: "Journal"
				
				pos_hint: {'x': .7, 'y': .06}
				size_hint: .15, .05
				on_release: root.get_journal('cash')
			

			Button:
			    id: kv_bon_button
				text: "Bon"
				on_release: root.print_bon(0)
				pos_hint: {'x': .85, 'y': .06}
				size_hint: .15, .05



			Button:
			    id: kv_printer_button
			    text: "Printer / Status"
				pos_hint: {'x': .70, 'y': .0}
				size_hint: .3, .05
				on_release: root.reprint_ticket(0,0)

			ProgressBar:
			    id: kv_printer_pbar
			    pos_hint: {'x': .70, 'y': .0}
				size_hint: .3, .02
				max: 100
				
			#Total, Given, Back
			Button:
				id: kv_total_button_text
				text: "Total"
				
				pos_hint: {'x': .35, 'y': .13}
				size_hint: .11, .03

			Button:
				id: kv_total_button
				font_size: "20dp"
				text: "0" + unichr(8364)

				pos_hint: {'x': .35, 'y': .06}
				size_hint: .11, .07

			Button:
				id: kv_given_button_text
				text: "Given"

				pos_hint: {'x': .465, 'y': .13}
				size_hint: .11, .03

			Button:
				id: kv_given_button
				font_size: "20dp"
				text: "0" + unichr(8364)

				pos_hint: {'x': .465, 'y': .06}
				size_hint: .11, .07

			Button:
				id: kv_back_button_text
				text: "Back"

				pos_hint: {'x': .58, 'y': .13}
				size_hint: .11, .03

			Button:
				id: kv_back_button
				font_size: "20dp"
				text: "0" + unichr(8364)

				pos_hint: {'x': .58, 'y': .06}
				size_hint: .11, .07
				
				
		#Status
			Button:
				id: kv_reservation_button
				text: "Reservation"
				on_release: root.reservation(0)
				pos_hint: {'x': .0, 'y': .0}
				size_hint: .165, .05

			Button:
				id: kv_release_con_button
				text: "Contingent"
				on_release: root.contingent(0,0)

				pos_hint: {'x': .175, 'y': .0}
				size_hint: .165, .05

			Button:
				id: kv_user_button
				text: "User"
				
				pos_hint: {'x': .35, 'y': .0}
				size_hint: .165, .05
				on_release: root.logout(1)

			Button:
				id: kv_dashboard_button
				text: "Dashboard"
				on_release: sm.transition.direction = 'left'
				on_release: sm.current = "dashboard"
				on_press: root.permissions('dashboard')
				on_press: root.get_printers()
				on_press: root.get_reports_dashboard(0,0,0,0,0,0)
				on_press: root.get_events_dashboard()
				on_press: root.get_venues_dashboard()
                on_press: root.get_users_dashboard()
                on_press: root.get_server_dashboard()
                on_press: root.get_pos_displays()
				pos_hint: {'x': .525, 'y': .0}
				size_hint: .165, .05
				
        Screen:
            name: 'third_item_screen'

            BoxLayout:
                id: sale_item_list_box3
                pos_hint: {'x': .0, 'y': 0}
                size_hint: 1, 1
                orientation: 'vertical'
                spacing: 5


                Button:
                    text: "Back"
                    size_hint: 1, 0.03
                    on_release: sm.current = "work1"


		Screen:
			name: 'journal'
			ScrollView:
				size_hint: 1, .9
				pos_hint: {'x': 0, 'y': .1}
				scroll_timeout: 100
				scroll_distance: 20


				GridLayout:
					id: journal_list_box
					pos_hint: {'x': 0, 'y': 0.0}
					size_hint: 1, None
					padding: 0
					spacing: 1
					#height: 30
					cols: 7
					rows: None
					do_scroll_x: False
					row_default_height: 30



            Button:
				text: "Cash"
				size_hint: 0.2, 0.1
				pos_hint: {'x': 0, 'y': 0}
				on_release: root.get_journal('cash')

            Button:
				text: "Card"
				size_hint: 0.2, 0.1
				pos_hint: {'x': 0.2, 'y': 0}
				on_release: root.get_journal('card')

			Button:
				text: "Reserved"
				size_hint: 0.2, 0.1
				pos_hint: {'x': 0.4, 'y': 0}
				on_release: root.get_journal('reserved')


			Button:
				text: "Back"
				size_hint: 0.4, 0.1
				pos_hint: {'x': 0.6, 'y': 0}
				on_release: sm.current = "work1"

		Screen:
			name: 'dashboard'

            GridLayout:
                id: dashboard_list_box
                pos_hint: {'x': 0, 'y': 0.1}
                size_hint: 1, .9
                padding: 0
                spacing: 5
                height: 30
                cols: 3
                rows: None
                do_scroll_x: False
                #row_default_height: 30

                FloatLayout:
                    size_hint: .3, .05
                    pos_hint: {'x': 0, 'y': 0}
                    Button:
                        id: kv_events_title
                        text: 'Reports'
                        pos_hint: {'x': 0, 'y': .85}
                        size_hint: 1, .15
                        #background_normal: ''
                        background_color: [.9,.9,.9,1]

                    Button:
                        id: kv_events
                        disabled: True
                        pos_hint: {'x': 0, 'y': 0}
                        size_hint: 1, .85
                        background_color: [.4,.4,.4,1]

                    GridLayout:
                        id: kv_dashboard_report_grid
                        pos_hint: {'x': .025, 'y': .2}
                        size_hint: .95, .625
                        padding: 0
                        spacing: 5
                        height: 10
                        cols: 1
                        rows: None
                        do_scroll_x: False


                    BoxLayout:
                        pos_hint: {'x': 0.025, 'y': .025}
                        size_hint: .95, .15
                        Button:
                            id: kv_reports_bkw
                            text: "<||"
                            on_release: root.get_reports_dashboard(-1,0,0,0,0,0)

                        Button:
                            id: kv_reports_details
                            text: "Details"
                            on_release: root.get_reports(0,0,0,0,0,0)


                        Button:
                            id: kv_reports_ffw
                            on_release: root.get_reports_dashboard(1,0,0,0,0,0)
                            text: "||>"




                FloatLayout:
                    size_hint: .3, .05
                    pos_hint: {'x': 0, 'y': 0}
                    Button:
                        id: kv_events_title
                        text: 'Events'
                        pos_hint: {'x': 0, 'y': .85}
                        size_hint: 1, .15
                        background_color: [.9,.9,.9,1]
                    Button:
                        id: kv_events
                        disabled: True
                        pos_hint: {'x': 0, 'y': 0}
                        size_hint: 1, .85
                        background_color: [.4,.4,.4,1]
                    ScrollView:
                        id: kv_dashboard_events_scrollview
                        pos_hint: {'x': .025, 'y': .2}
                        size_hint: .95, .625
                        do_scroll_x: False

                        GridLayout:
                            id: kv_dashboard_events_grid
                            cols: 1
                            size_hint: 1, None



                    BoxLayout:
                        pos_hint: {'x': 0.025, 'y': .025}
                        size_hint: .95, .15
                        Button:
                            id: kv_create_event
                            text: "Create"
                            on_release: sm.transition.direction = 'left'
                            on_release: sm.current = "create_event"
                            on_press: root.get_venues()

                        Button:
                            id: kv_edit_event
                            text: "Edit / Delete"
                            on_release: sm.transition.direction = 'left'
                            on_release: sm.current = "edit_delete_events"
                            on_release: root.edit_events(0,0,0,0,0,0)



                FloatLayout:
                    size_hint: .3, .05
                    pos_hint: {'x': 0, 'y': 0}
                    Button:
                        id: kv_venues_cat_prices_title
                        text: 'Venues / Categories / Prices'
                        pos_hint: {'x': 0, 'y': .85}
                        size_hint: 1, .15
                        background_color: [.9,.9,.9,1]
                    Button:
                        id: kv_venues_cat_price
                        disabled: True
                        pos_hint: {'x': 0, 'y': 0}
                        size_hint: 1, .85
                        background_color: [.4,.4,.4,1]


                    ScrollView:
                        id: kv_dashboard_venues_cat_prices_scrollview
                        pos_hint: {'x': .025, 'y': .2}
                        size_hint: .95, .625
                        do_scroll_x: False

                        GridLayout:
                            id: kv_dashboard_venues_cat_prices_grid
                            cols: 1
                            size_hint: 1, None


                    BoxLayout:
                        pos_hint: {'x': 0.025, 'y': .025}
                        size_hint: .95, .15
                        Button:
                            id: kv_venues_cat_price_create
                            text: "Create"
                            #on_release: sm.transition.direction = 'left'
                            #on_release: sm.current = "create_event"
                            #on_press: root.get_venues()

                        Button:
                            id: kv_venues_cat_price_edit
                            text: "Edit"
                            #on_release: sm.transition.direction = 'left'
                            #on_release: sm.current = "create_event"
                            #on_press: root.get_venues()

                        Button:
                            id: kv_venues_cat_price_delete
                            text: "Delete"
                            #on_release: sm.transition.direction = 'left'
                            #on_release: sm.current = "create_event"
                            #on_press: root.get_venues()

                FloatLayout:
                    size_hint: .3, .05
                    pos_hint: {'x': 0, 'y': 0}
                    Button:
                        id: kv_users_title
                        text: 'Users'
                        pos_hint: {'x': 0, 'y': .85}
                        size_hint: 1, .15
                        background_color: [.9,.9,.9,1]
                    Button:
                        id: kv_users
                        disabled: True
                        pos_hint: {'x': 0, 'y': 0}
                        size_hint: 1, .85
                        background_color: [.4,.4,.4,1]

                    ScrollView:
                        id: kv_dashboard_users_scrollview
                        pos_hint: {'x': .025, 'y': .2}
                        size_hint: .95, .625
                        do_scroll_x: False

                        GridLayout:
                            id: kv_dashboard_users_grid
                            cols: 1
                            size_hint: 1, None


                    BoxLayout:
                        pos_hint: {'x': 0.025, 'y': .025}
                        size_hint: .95, .15
                        Button:
                            id: kv_users_add
                            text: "Add"
                            on_release: sm.transition.direction = 'left'
                            on_release: sm.current = "add_user"

                        Button:
                            id: kv_users_edit_delete
                            text: "Edit / Delete"
                            on_release: sm.transition.direction = 'left'
                            on_release: sm.current = "select_user"
                            on_release: root.get_users_select()


                FloatLayout:
                    size_hint: .3, .05
                    pos_hint: {'x': 0, 'y': 0}
                    Button:
                        id: kv_printers_title
                        text: 'Printers'
                        #on_release: sm.current = "printers"
                        #on_press: root.get_printers()
                        #pos_hint: {'x': .70, 'y': .0}
                        pos_hint: {'x': 0, 'y': .85}
                        size_hint: 1, .15
                        background_color: [.9,.9,.9,1]
                    Button:
                        id: kv_printers
                        disabled: True
                        #on_release: sm.current = "printers"
                        #on_press: root.get_printers()
                        #pos_hint: {'x': .70, 'y': .0}
                        pos_hint: {'x': 0, 'y': 0}
                        size_hint: 1, .85
                        background_color: [.4,.4,.4,1]

                    GridLayout:
                        id: printers_list_box
                        pos_hint: {'x': .025, 'y': .2}
                        size_hint: .95, .625
                        padding: 0
                        spacing: 5
                        height: 10
                        cols: 2
                        rows: None
                        do_scroll_x: False
                        #row_default_height: 30


                        Label:
                            text: "Ticket"
                            size_hint: .3, 1

                        Spinner:
                            text: "select"
                            id: kv_ticket_printer_spinner
                            on_text: root.set_printer('ticket',self.text)
                        Label:
                            text: "Bon   "
                            size_hint: .3, 1

                        Spinner:
                            text: "select"
                            id: kv_bon_printer_spinner
                            on_text: root.set_printer('bon',self.text)

                        Label:
                            text: "Report"
                            size_hint: .3, 1

                        Spinner:
                            text: "select"
                            id: kv_report_printer_spinner
                            on_text: root.set_printer('report',self.text)
                        Label:
                            text: "Display"
                            size_hint: .3, 1

                        Spinner:
                            text: "select"
                            id: kv_display_spinner
                            on_text: root.set_pos_display(self.text)
                    Button:
                        id: kv_load_printer_displays
                        text: "Reload Printers / Displays"
                        on_release: root.get_printers()
                        on_release: root.get_pos_displays()

                        pos_hint: {'x': 0.025, 'y': .025}
                        size_hint: .95, .15


                FloatLayout:
                    size_hint: .3, .05
                    pos_hint: {'x': 0, 'y': 0}
                    Button:
                        id: kv_server_title
                        text: 'Server'
                        pos_hint: {'x': 0, 'y': .85}
                        size_hint: 1, .15
                        background_color: [.9,.9,.9,1]
                    Button:
                        id: kv_server
                        disabled: True
                        pos_hint: {'x': 0, 'y': 0}
                        size_hint: 1, .85
                        background_color: [.4,.4,.4,1]

                    ScrollView:
                        id: kv_dashboard_server_scrollview
                        pos_hint: {'x': .025, 'y': .2}
                        size_hint: .95, .625
                        do_scroll_x: False

                        GridLayout:
                            id: kv_dashboard_server_grid
                            cols: 1
                            size_hint: 1, None

                    BoxLayout:
                        pos_hint: {'x': 0.025, 'y': .025}
                        size_hint: .95, .15
                        Button:
                            id: kv_server_restart
                            text: "Restart"
                            #on_release: sm.transition.direction = 'left'
                            #on_release: sm.current = "create_event"
                            #on_press: root.get_venues()
                        Button:
                            id: kv_server_reboot
                            text: "Reboot"
                            #on_release: sm.transition.direction = 'left'
                            #on_release: sm.current = "create_event"
                            #on_press: root.get_venues()

                        Button:
                            id: kv_server_shutdown
                            text: "Shutdown"
                            #on_release: sm.transition.direction = 'left'
                            #on_release: sm.current = "create_event"
                            #on_press: root.get_venues()

			Button:
				text: "Back"
				size_hint: 1, 0.09
				pos_hint: {'x': 0, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "work1"

		Screen:
			name: 'printers'
			ScrollView:
				size_hint: 1, .9
				pos_hint: {'x': 0, 'y': .1}
				scroll_timeout: 100
				scroll_distance: 20




			Button:
				text: "Back"
				size_hint: 1, 0.1
				pos_hint: {'x': 0, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "dashboard"

		Screen:
			name: 'create_event'
			venue_title: venue_title.__self__
			ScrollView:
				size_hint: 1, .9
				pos_hint: {'x': 0, 'y': .1}
				scroll_timeout: 100
				scroll_distance: 20



				GridLayout:
					id: create_event_list_box
					pos_hint: {'x': 0, 'y': 0.0}
					size_hint: 1, 1.0
					padding: 0
					spacing: 5
					cols: 2
					rows: None
					do_scroll_x: False
					row_default_height: 10


				    Label:
				        text: "Title"

				    TextInput:
				        id: kv_create_event_title
				        hint_text: "Short Title: ZDH Berlin"

				    Label:

				        text: "Description"

				    TextInput:
				        id: kv_create_event_description
				        hint_text: "Zirkus des Horrors in Berlin"

                    Label:
				        text: "Venue"

                    Button:
                        id: venue_btn
                        text: 'select...'
                        on_release: venue_title.open(self)

                        background_normal: 'atlas://data/images/defaulttheme/spinner'
                        background_down: 'atlas://data/images/defaulttheme/spinner_pressed'
                        background_disabled_normal: 'atlas://data/images/defaulttheme/spinner_disabled'

                    DropDown:
                        id: venue_title
                        on_select: venue_btn.text = '{}'.format(args[1])
                        on_parent: self.dismiss()


				    Label:
				        text: "Start/End Date"

				    BoxLayout:
				        #orientation: 'vertical'

				        TextInput:
				            id: kv_create_event_date_start
				            hint_text: "2016-03-10"
                        TextInput:
                            id: kv_create_event_date_end
                            hint_text: "2016-04-24"

				    Label:
				        text: "Admission, hours before start"

                    TextInput:
                        id: kv_create_event_admission_hours
                        hint_text: "1:00"

                    Label:
				        text: "Start times of weekdays"

				    Label:
				        text: "-"


				    Label:
				        text: "Mon."

                    TextInput:
                        id: kv_create_event_mon_times
                        hint_text: ""

				    Label:
				        text: "Tue."

                    TextInput:
                        id: kv_create_event_tue_times
                        hint_text: "19:00"

				    Label:
				        text: "Wed."

                    TextInput:
                        id: kv_create_event_wed_times
                        hint_text: "19:00"

				    Label:
				        text: "Thu."

                    TextInput:
                        id: kv_create_event_thu_times
                        hint_text: "19:00"

				    Label:
				        text: "Fri. "

                    TextInput:
                        id: kv_create_event_fri_times
                        hint_text: "19:00, 23:00"

				    Label:
				        text: "Sat."

                    TextInput:
                        id: kv_create_event_sat_times
                        hint_text: "19:00, 23:00"

                    Label:
				        text: "Sun."

                    TextInput:
                        id: kv_create_event_sun_times
                        hint_text: "19:00"
                    Label:
				        text: "Copy prices from:"

                    Button:
                        id: event_btn_cf
                        text: 'select...'
                        on_release: event_title_cf.open(self)

                        background_normal: 'atlas://data/images/defaulttheme/spinner'
                        background_down: 'atlas://data/images/defaulttheme/spinner_pressed'
                        background_disabled_normal: 'atlas://data/images/defaulttheme/spinner_disabled'

                    DropDown:
                        id: event_title_cf
                        font_size: self.height * .35
                        on_select: event_btn_cf.text = '{}'.format(args[1])
                        on_parent: self.dismiss()

		    Button:
				text: "Back"
				size_hint: 0.5, 0.1
				pos_hint: {'x': 0, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "dashboard"

		    Button:
				text: "Create"
				size_hint: 0.5, 0.1
				pos_hint: {'x': .5, 'y': 0}
				on_release: root.create_events()
				#on_release: sm.transition.direction = 'left'
				#on_release: sm.current = "dashboard"

		#####################
		Screen:
            name: 'edit_delete_events'
            GridLayout:
                id: event_edit_delete_titles_grid
                pos_hint: {'x': 0, 'y': 0.95}
                size_hint: 1, .05
                padding: 0
                spacing: 3
                cols: 5
                rows: None
                Label:
                    size_hint: .3, 1
                    text: 'Event'
                Label:
                    size_hint: .3, 1
                    text: 'Date'
                Label:
                    size_hint: .2, 1
                    text: 'Edit / Delete'
                Label:
                    size_hint: .2, 1
                    text: ''
                Label:
                    text: ''

            GridLayout:
                id: event_edit_delete_select_grid
                pos_hint: {'x': 0, 'y': 0.1}
                size_hint: 1, .85
                padding: 0
                spacing: 3
                cols: 3
                rows: None


                ScrollView:
                    size_hint: .25, 1
                    GridLayout:
                        id: event_edit_delete_event_select_list
                        size_hint: 1, None
                        cols: 1
                        row_default_height: 30

                ScrollView:
                    size_hint: .25, 1
                    GridLayout:
                        id: event_edit_delete_date_select_list
                        size_hint: 1, None
                        cols: 1
                        row_default_height: 30


                ScrollView:
                    size_hint: .5, 1
                    GridLayout:
                        id: event_edit_delete_work
                        size_hint: 1, None
                        cols: 2
                        row_default_height: 30



            Button:
                text: "Back"
                size_hint: .25, 0.1
                pos_hint: {'x': 0, 'y': 0}
                on_release: sm.transition.direction = 'right'
                on_release: sm.current = "dashboard"

            Button:
                id: kv_event_edit_delete_add_button
                text: "Add"
                size_hint: .25, 0.1
                pos_hint: {'x': .25, 'y': 0}
                on_release: root.edit_events(3,0,0,0,0,0)
            Button:
                text: "Update"
                size_hint: .25, 0.1
                pos_hint: {'x': .5, 'y': 0}
                on_release: root.edit_events(4,0,0,0,0,0)
            Button:
                text: "Delete"
                size_hint: .25, 0.1
                pos_hint: {'x': .75, 'y': 0}
                on_release: root.edit_events(5,0,0,0,0,0)

		#################

        Screen:
            name: 'reports'
            GridLayout:
                id: report_select_grid
                pos_hint: {'x': 0, 'y': 0.95}
                size_hint: 1, .05
                padding: 0
                spacing: 3
                cols: 7
                rows: None
                Label:
                    size_hint: .15, 1
                    text: 'Event'
                Label:
                    size_hint: .15, 1
                    text: 'Date'
                Label:
                    size_hint: .1, 1
                    text: 'Time'
                Label:
                    size_hint: .1, 1
                    text: 'User'
                Label:
                    size_hint: .2, 1
                    text: 'Report'
                ToggleButton:
                    size_hint: .15, 1
                    id: kv_report_for_date
                    text: 'FOR Date'
                    group: 'for_on_date'
                    on_release: root.get_reports(1, 0, 0, 0, 0, 0)
                ToggleButton:
                    size_hint: .15, 1
                    id: kv_report_on_date
                    text: 'ON Date'
                    group: 'for_on_date'
                    on_release: root.get_reports(1, 0, 0, 0, 0, 0)
            GridLayout:
                id: report_select_grid
                pos_hint: {'x': 0, 'y': 0.1}
                size_hint: 1, .85
                padding: 0
                spacing: 3
                cols: 5
                rows: None
                #row_default_height: 10

                ScrollView:
                    size_hint: .3, 1
                    #pos_hint: {'x': 0, 'y': .1}
                    #scroll_timeout: 100
                    #scroll_distance: 20
                    GridLayout:
                        id: report_select_event_list
                        size_hint: 1, None
                        cols: 1
                        row_default_height: 30

                ScrollView:
                    size_hint: .3, 1
                    GridLayout:
                        id: report_select_date_list
                        size_hint: 1, None
                        cols: 1
                        row_default_height: 30



                ScrollView:
                    size_hint: .2, 1
                    GridLayout:
                        id: report_select_time_list
                        size_hint: 1, None
                        cols: 1


                ScrollView:
                    size_hint: .2, 1
                    GridLayout:
                        id: report_select_user_list
                        size_hint: 1, None
                        cols: 1

                ScrollView:
                    GridLayout:
                        id: report_draw_list
                        size_hint: 1, None
                        cols: 1

            Button:
                text: "Back"
                size_hint: 0.5, 0.1
                pos_hint: {'x': 0, 'y': 0}
                on_release: sm.transition.direction = 'right'
                on_release: sm.current = "dashboard"

            Button:
                text: "Print Report"
                size_hint: 0.5, 0.1
                pos_hint: {'x': .5, 'y': 0}
                on_release: root.get_reports(2, 0, 0, 0, 0, 0)

        Screen:
			name: 'add_user'

			ScrollView:
				size_hint: 1, .9
				pos_hint: {'x': 0, 'y': .1}
				scroll_timeout: 100
				scroll_distance: 20



				GridLayout:
					id: add_user_list_box
					pos_hint: {'x': 0, 'y': 0.0}
					size_hint: 1, 1.0
					padding: 0
					spacing: 5
					cols: 2
					rows: None
					do_scroll_x: False
					row_default_height: 10


				    Label:
				        text: "Username"
				        size_hint: .3, 1

				    TextInput:
				        id: kv_add_user_name
				        hint_text: "max"

                    Label:
				        text: "Pin"
				        size_hint: .3, 1

				    TextInput:
				        id: kv_add_user_pin
				        input_filter: 'int'
				        password: True
				        hint_text: "11223"

                    Label:
				        text: "Firstname"
				        size_hint: .3, 1

				    TextInput:
				        id: kv_add_user_firstname
				        hint_text: "Maximilian"

                    Label:
				        text: "Lastname"
				        size_hint: .3, 1

				    TextInput:
				        id: kv_add_user_lastname
				        hint_text: "Mustermann"

				    Label:
				        text: "E-mail"
				        size_hint: .3, 1

				    TextInput:
				        id: kv_add_user_email
				        hint_text: "max@mustermann.de"

				    Label:
				        text: "Phone"
				        size_hint: .3, 1

				    TextInput:
				        id: kv_add_user_phone
				        hint_text: "004917623108500"


            Button:
				text: "Back"
				size_hint: 0.5, 0.1
				pos_hint: {'x': 0, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "dashboard"

		    Button:
				text: "Add"
				size_hint: 0.5, 0.1
				pos_hint: {'x': .5, 'y': 0}
				on_release: root.add_user()
				on_release: sm.current = "dashboard"


        Screen:
			name: 'select_user'

			ScrollView:
				size_hint: 1, .9
				pos_hint: {'x': 0, 'y': .1}
				scroll_timeout: 100
				scroll_distance: 20
				GridLayout:
                    id: kv_user_select_grid
                    #pos_hint: {'x': .025, 'y': .2}
                    size_hint: 1, None
                    padding: 0
                    spacing: 3
                    height: 10
                    cols: 1
                    rows: None
                    do_scroll_x: False

            Button:
				text: "Back"
				size_hint: 1, 0.1
				pos_hint: {'x': 0, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "dashboard"
        Screen:
			name: 'edit_user'

			ScrollView:
				size_hint: 1, .9
				pos_hint: {'x': 0, 'y': .1}
				scroll_timeout: 100
				scroll_distance: 20



				GridLayout:
					id: edit_user_list_grid
					pos_hint: {'x': 0, 'y': 0.0}
					size_hint: 1, 1.0
					padding: 0
					spacing: 5
					cols: 2
					rows: None
					do_scroll_x: False
					row_default_height: 10




		    Button:
				text: "Back"
				size_hint: .5, 0.1
				pos_hint: {'x': 0, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "dashboard"

		    Button:
				text: "Update"
				size_hint: .5, 0.1
				pos_hint: {'x': .5, 'y': 0}
				on_release: sm.transition.direction = 'right'
				on_release: sm.current = "select_user"
				on_release: root.update_user()

<BillItemArtikel>:
	id: bill_item_artikel
	size_hint: 1, None
	Button:
		text: "1"
		pos_hint: {'x': .0, 'y': .0}
		size_hint: .2, .9
		on_release: app.root.ids.number_display_box.text = ''
	Button:
		text: str(self.id)
		pos_hint: {'x': .2, 'y': .0}
		size_hint: .4, .9
		on_release: app.root.ids.number_display_box.text = ''
	
	Button:
		text: "+"
		pos_hint: {'x': .6, 'y': .0}
		size_hint: .2, .9
		on_release: app.root.ids.number_display_box.text = ''	
							
	Button:
		text: "-"
		pos_hint: {'x': .8, 'y': .0}
		size_hint: .2, .9
		on_release: app.root.ids.number_display_box.text = ''
		
		

<ImageButton@Button>:
	source: root.source
	Image:
		source: root.source
		pos: root.pos
		size: root.size

<DropDownButton@Button>:
	Image:
		source: 'images/spinner.jpg'
		align: 'right'
		pos: root.pos
		size: root.size

<CLabel>:
    canvas.before:
        Color:
            rgba: self.bgcolor
        Rectangle:
            pos: self.pos
            size: self.size

	
<ItemAmountButton>:
	on_press: self.text = app.root.ids.number_display_box.text
	on_release: app.root.ids.number_display_box.text = ''
	
	
<UserSelectButton>:
	size_hint_y: None
	height: 50
	width: 50
	on_release: app.root.btms_login(self.text,'')
	
	
<LoginButton>:
	text: 'Login'
	on_release: app.root.btms_login_auth('test', app.root.ids.kv_password_input.text)